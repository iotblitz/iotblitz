"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[1109],{1109:(me,f,l)=>{l.r(f),l.d(f,{FloatlabelDemoModule:()=>se});var h=l(6814),c=l(95),Z=l(3557),u=l(9862),T=l(5118),m=l(5219),e=l(4769),N=l(5905),F=l(8814),q=l(7744),S=l(981),b=l(1865),C=l(7327),D=l(707),v=l(3714),_=l(3965),y=l(5167),x=l(4104),g=l(9552),A=l(1312),U=l(8608);function I(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",12)(1,"b",13),e._uU(2),e.qZA(),e._uU(3,"| "),e.TgZ(4,"b"),e._uU(5,"ONLINE"),e.qZA(),e._UZ(6,"p-badge",14),e._uU(7,"| "),e.TgZ(8,"b"),e._uU(9,"OFFLINE"),e.qZA(),e._UZ(10,"p-badge",15)(11,"br"),e.TgZ(12,"span",16),e._UZ(13,"i",17),e.TgZ(14,"button",18),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.openNew2())}),e.qZA()()()}if(2&n){const o=e.oxw();e.xp6(2),e.hij("Total Device : ",o.stockList?o.stockList.length:0,""),e.xp6(4),e.Q6J("value",20),e.xp6(4),e.Q6J("value",10)}}function L(n,r){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Sl No."),e.qZA(),e.TgZ(3,"th",19),e._uU(4,"Device"),e._UZ(5,"p-sortIcon",20),e.qZA(),e.TgZ(6,"th",21),e._uU(7,"Device Name "),e._UZ(8,"p-sortIcon",20),e.qZA(),e.TgZ(9,"th",22),e._uU(10,"Device Type "),e._UZ(11,"p-sortIcon",20),e.qZA(),e.TgZ(12,"th",23),e._uU(13,"Meter Type "),e._UZ(14,"p-sortIcon",20),e.qZA(),e.TgZ(15,"th",24),e._uU(16,"Model"),e._UZ(17,"p-sortIcon",25),e.qZA(),e.TgZ(18,"th",26),e._uU(19,"Latitude "),e._UZ(20,"p-sortIcon",27),e.qZA(),e.TgZ(21,"th",28),e._uU(22,"Longitude "),e._UZ(23,"p-sortIcon",27),e.qZA(),e.TgZ(24,"th",29),e._uU(25,"IMEI NO "),e._UZ(26,"p-sortIcon",27),e.qZA(),e.TgZ(27,"th",30),e._uU(28,"Status "),e._UZ(29,"p-sortIcon",31),e.qZA(),e.TgZ(30,"th"),e._uU(31,"Edit"),e.qZA()())}function J(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"th",32),e._UZ(20,"p-badge",33),e.qZA(),e.TgZ(21,"td",32)(22,"button",34),e.NdJ("click",function(){const a=e.CHM(o).$implicit,s=e.oxw();return e.KtG(s.editProduct(a))}),e.qZA()()()}if(2&n){const o=r.rowIndex,t=r.$implicit;e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(t.device),e.xp6(2),e.Oqu(t.device_name),e.xp6(2),e.Oqu("EN"==t.device_type?"Energy Meter":"Water Meter"),e.xp6(2),e.Oqu("ENSF"==t.meter_type?"Single Phase":"Three Phase"),e.xp6(2),e.Oqu(t.model),e.xp6(2),e.Oqu(t.lat),e.xp6(2),e.Oqu(t.lon),e.xp6(2),e.Oqu(t.imei_no),e.xp6(2),e.Q6J("value",t.energy_data_created_at?"Online":"Offline")("severity",t.energy_data_created_at?"success":"danger")}}function w(n,r){if(1&n&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.hij("In total there are ",o.stockList?o.stockList.length:0," devices.")}}function O(n,r){1&n&&(e.TgZ(0,"small",51),e._uU(1,"Name is required."),e.qZA())}const P=function(){return{standalone:!0}};function k(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"div",35)(1,"label",36),e._uU(2,"Devuce id"),e.qZA(),e.TgZ(3,"p-autoComplete",37),e.NdJ("ngModelChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.selectedDealer=i)})("onSelect",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.setDevice())})("completeMethod",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.filterDealer(i))}),e.qZA(),e.YNc(4,O,2,0,"small",38),e.qZA(),e.TgZ(5,"div",35)(6,"label",39),e._uU(7,"Status"),e.qZA(),e.TgZ(8,"div",40)(9,"div",41)(10,"p-radioButton",42),e.NdJ("ngModelChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.product.category=i)}),e.qZA(),e.TgZ(11,"label",43),e._uU(12,"Active"),e.qZA()(),e.TgZ(13,"div",41)(14,"p-radioButton",44),e.NdJ("ngModelChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.product.category=i)}),e.qZA(),e.TgZ(15,"label",45),e._uU(16,"Deactive"),e.qZA()()()(),e.TgZ(17,"div",40)(18,"div",46)(19,"label",47),e._uU(20,"Model"),e.qZA(),e.TgZ(21,"p-dropdown",48),e.NdJ("ngModelChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.selectedCity=i)}),e.qZA()(),e.TgZ(22,"div",46)(23,"label",49),e._uU(24,"Battery(%)"),e.qZA(),e.TgZ(25,"p-inputNumber",50),e.NdJ("ngModelChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.product.quantity=i)}),e.qZA()()()}if(2&n){const o=e.oxw();e.xp6(3),e.Q6J("ngModel",o.selectedDealer)("ngModelOptions",e.DdM(11,P))("suggestions",o.filteredDealer)("dropdown",!0),e.xp6(1),e.Q6J("ngIf",o.submitted&&!o.product.name),e.xp6(6),e.Q6J("ngModel",o.product.category),e.xp6(4),e.Q6J("ngModel",o.product.category),e.xp6(7),e.Q6J("options",o.DeviceModel)("ngModel",o.selectedCity)("showClear",!0),e.xp6(4),e.Q6J("ngModel",o.product.quantity)}}function Y(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.hideDialog())}),e.qZA(),e.TgZ(1,"button",53),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.saveProduct())}),e.qZA()}}function E(n,r){if(1&n&&(e.TgZ(0,"option",65),e._uU(1),e.qZA()),2&n){const o=r.$implicit;e.Q6J("value",o.code),e.xp6(1),e.hij(" ",o.name," ")}}function Q(n,r){if(1&n&&(e.TgZ(0,"option",65),e._uU(1),e.qZA()),2&n){const o=r.$implicit;e.Q6J("value",o.code),e.xp6(1),e.hij(" ",o.name," ")}}function B(n,r){if(1&n&&(e.TgZ(0,"form",54)(1,"div",35)(2,"label",36),e._uU(3,"Device Name"),e.qZA(),e._UZ(4,"input",55),e.qZA(),e.TgZ(5,"div",35)(6,"label",36),e._uU(7,"Device ID"),e.qZA(),e._UZ(8,"input",56),e.qZA(),e.TgZ(9,"div",35)(10,"label",36),e._uU(11,"Model"),e.qZA(),e._UZ(12,"input",57),e.qZA(),e.TgZ(13,"div",35)(14,"label",58),e._uU(15,"Device Type"),e.qZA(),e.TgZ(16,"select",59),e.YNc(17,E,2,2,"option",60),e.qZA()(),e.TgZ(18,"div",35)(19,"label",58),e._uU(20,"Meter Type"),e.qZA(),e.TgZ(21,"select",61),e.YNc(22,Q,2,2,"option",60),e.qZA()(),e.TgZ(23,"div",35)(24,"label",36),e._uU(25,"Latitude"),e.qZA(),e._UZ(26,"input",62),e.qZA(),e.TgZ(27,"div",35)(28,"label",36),e._uU(29,"Longitude"),e.qZA(),e._UZ(30,"input",63),e.qZA(),e.TgZ(31,"div",35)(32,"label",36),e._uU(33,"IMEI NO"),e.qZA(),e._UZ(34,"input",64),e.qZA()()),2&n){const o=e.oxw();e.Q6J("formGroup",o.addDevice),e.xp6(17),e.Q6J("ngForOf",o.DeviceType),e.xp6(5),e.Q6J("ngForOf",o.meterType)}}function K(n,r){if(1&n){const o=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.hideDialog())}),e.qZA(),e.TgZ(1,"button",53),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.saveProduct())}),e.qZA()}}const H=function(){return["device_id","modal","battery","status"]},G=function(){return{"min-width":"75rem"}},M=function(){return{width:"450px",height:"500px"}};let W=(()=>{var n;class r{constructor(t,i,a,s,d,p,de,pe){this.authservice=t,this.api=i,this.countryService=a,this.http=s,this.productService=d,this.fb=p,this.messageService=de,this.confirmationService=pe,this.checked=!0,this.checked2=!1,this.productDialog=!1,this.AddproductDialog=!1,this.client_id=+localStorage.getItem("c_id"),this.spinner=!1,this.submitted=!1,this.stockList=[],this.loginType=localStorage.getItem("loginType"),this.DeviceModel=[{name:"Energy",code:"EN"},{name:"Water",code:"WA"},{name:"Power",code:"PO"},{name:"Wind",code:"WI"}],this.DeviceType=[{name:"Energy",code:"EN"},{name:"Water",code:"WA"},{name:"Power",code:"PO"},{name:"Wind",code:"WI"}],this.meterType=[{name:"Single Phase",code:"ENSF"},{name:"Three Phase",code:"ENTF"}],this.addDevice=this.fb.group({did:[""],deviceName:["",c.kI.required],deviceId:["",[c.kI.required]],dmodel:["",[c.kI.required]],lat:["",[c.kI.required]],long:["",[c.kI.required]],imeiNo:["",[c.kI.required]],device_type:["",[c.kI.required]],meter_type:["",[c.kI.required]]})}ngOnInit(){this.getAllStock(),this.ct=this.addDevice.controls,this.productService.getProducts().then(t=>this.products=t),this.statuses=[{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}]}openNew(){this.operationType="U",this.product={},this.submitted=!1,this.AddproductDialog=!0}openNew2(){this.addDevice.reset(),this.operationType="I",this.product={},this.submitted=!1,this.AddproductDialog=!0}getSeverity(t){return"success"}deleteSelectedProducts(){this.confirmationService.confirm({message:"Are you sure you want to delete the selected products?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.products=this.products.filter(t=>!this.selectedProducts?.includes(t)),this.selectedProducts=null,this.messageService.add({severity:"success",summary:"Successful",detail:"Products Deleted",life:3e3})}})}editProduct(t){this.operationType="U",this.addDevice.patchValue({did:t.device_id,deviceName:t.device_name,device_type:t.device_type,meter_type:t.meter_type,deviceId:t.device,dmodel:t.model,lat:t.lat,long:t.lon,imeiNo:t.imei_no}),this.AddproductDialog=!0}deleteProduct(t){this.confirmationService.confirm({message:"Are you sure you want to delete this Device ?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.products=this.products.filter(i=>i.device_id!==t),this.product={},this.messageService.add({severity:"success",summary:"Successful",detail:"Device Deleted",life:3e3})}})}hideDialog(){this.AddproductDialog=!1,this.productDialog=!1,this.submitted=!1}getAllStock(){this.spinner=!0;const t=this.api.baseUrl,i=localStorage.getItem("token"),a=(new u.WM).set("Authorization",`Bearer ${i}`);this.http.post(t+"/client/manage/devices/list",{client_id:this.client_id},{headers:a}).subscribe(d=>{this.spinner=!1,console.log(d),this.stockApi=d,this.stockList=this.stockApi.data},d=>{this.spinner=!1,console.error(d)})}convDt(){var i=new Date(new Date);return i.getFullYear()+"-"+("0"+(i.getMonth()+1)).slice(-2)+"-"+("0"+i.getDate()).slice(-2)}saveProduct(){if(this.submitted=!0,"I"==this.operationType){const t=this.api.baseUrl,i=localStorage.getItem("token"),a=(new u.WM).set("Authorization",`Bearer ${i}`),d=[{client_id:this.client_id,device_name:this.ct.deviceName.value,device:this.ct.deviceId.value,model:this.ct.dmodel.value,lat:this.ct.lat.value,lon:this.ct.long.value,imei_no:this.ct.imeiNo.value,device_type:this.ct.device_type.value,meter_type:this.ct.meter_type.value,do_channel:1,last_maintenance:this.convDt()}];this.http.post(t+"/client/manage/devices/add",d,{headers:a}).subscribe(p=>{console.log(p),this.spinner=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Device Created",life:3e3}),this.resetData(),this.getAllStock(),this.hideDialog()},p=>{this.spinner=!1,console.log(p),this.hideDialog()})}else{const t=this.api.baseUrl,i=localStorage.getItem("token"),a=(new u.WM).set("Authorization",`Bearer ${i}`);this.http.post(t+"/client/manage/devices/edit",{device_id:this.ct.did.value,client_id:this.client_id,device_name:this.ct.deviceName.value,device:this.ct.deviceId.value,model:this.ct.dmodel.value,lat:this.ct.lat.value,lon:this.ct.long.value,imei_no:this.ct.imeiNo.value,device_type:this.ct.device_type.value,meter_type:this.ct.meter_type.value,do_channel:1},{headers:a}).subscribe(d=>{console.log(d),this.spinner=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Device Updated",life:3e3}),this.resetData(),this.getAllStock(),this.hideDialog()},d=>{this.spinner=!1,console.log(d),this.hideDialog()})}}resetData(){this.addDevice.reset()}findIndexById(t){let i=-1;for(let a=0;a<this.products.length;a++)if(this.products[a].id===t){i=a;break}return i}createId(){let t="";for(var a=0;a<5;a++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}}return(n=r).\u0275fac=function(t){return new(t||n)(e.Y36(N.$),e.Y36(F.s),e.Y36(q.T),e.Y36(u.eN),e.Y36(S.M),e.Y36(c.qu),e.Y36(m.ez),e.Y36(m.YP))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e._Bn([T.xA,m.ez])],decls:17,vars:20,consts:[[1,"col-12","lg:col-6","xl:col-12"],[1,"card"],[1,"m-2"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["header","Product Details","styleClass","p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],[1,"flex","align-items-center","justify-content-between"],[1,"text-900","font-medium","text-xl"],["severity","success",3,"value"],["severity","danger",3,"value"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pButton","","pRipple","","label","Add New Device","icon","pi pi-plus",1,"p-button-primary","mr-2",3,"click"],["pSortableColumn","device",2,"min-width","15rem"],["field","name"],["pSortableColumn","device_name",2,"min-width","15rem"],["pSortableColumn","device_type",2,"min-width","15rem"],["pSortableColumn","meter_type",2,"min-width","15rem"],["pSortableColumn","model"],["field","price"],["pSortableColumn","lat",2,"min-width","10rem"],["field","category"],["pSortableColumn","lon",2,"min-width","10rem"],["pSortableColumn","imei_no",2,"min-width","10rem"],["pSortableColumn","energy_data_created_at",2,"min-width","10rem"],["field","inventoryStatus"],[2,"text-align","center"],[3,"value","severity"],["type","button","pButton","","pRipple","","icon","pi pi-pencil",3,"click"],[1,"field"],["for","name"],["placeholder","ABCDE01001","field","device_name",3,"ngModel","ngModelOptions","suggestions","dropdown","ngModelChange","onSelect","completeMethod"],["class","p-error",4,"ngIf"],[1,"mb-3"],[1,"formgrid","grid"],[1,"field-radiobutton","col-6"],["id","category1","name","category","value","Active",3,"ngModel","ngModelChange"],["for","category1"],["id","category2","name","category","value","Deactive",3,"ngModel","ngModelChange"],["for","category2"],[1,"field","col"],["for","price"],["optionLabel","name","placeholder","Select a Model",3,"options","ngModel","showClear","ngModelChange"],["for","quantity"],["id","quantity",3,"ngModel","ngModelChange"],[1,"p-error"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],[3,"formGroup"],["type","text","pInputText","","id","name","formControlName","deviceName","required","","autofocus",""],["type","text","pInputText","","id","name","formControlName","deviceId","required","","autofocus",""],["type","text","pInputText","","id","name","formControlName","dmodel","required","","autofocus",""],["htmlFor","firstname2"],["formControlName","device_type",2,"width","100%","height","42px","border-color","lightgray","border-radius","5px"],[3,"value",4,"ngFor","ngForOf"],["formControlName","meter_type",2,"width","100%","height","42px","border-color","lightgray","border-radius","5px"],["type","text","pInputText","","id","name","formControlName","lat","required","","autofocus",""],["type","text","pInputText","","id","name","formControlName","long","required","","autofocus",""],["type","text","pInputText","","id","name","formControlName","imeiNo","required","","autofocus",""],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"p-toast"),e.TgZ(3,"h5",2),e._uU(4,"Manage Device"),e.qZA(),e.TgZ(5,"p-table",3,4),e.NdJ("selectionChange",function(s){return i.selectedProducts=s}),e.YNc(7,I,15,3,"ng-template",5),e.YNc(8,L,32,0,"ng-template",6),e.YNc(9,J,23,11,"ng-template",7),e.YNc(10,w,2,1,"ng-template",8),e.qZA()(),e.TgZ(11,"p-dialog",9),e.NdJ("visibleChange",function(s){return i.productDialog=s}),e.YNc(12,k,26,12,"ng-template",10),e.YNc(13,Y,2,0,"ng-template",11),e.qZA(),e.TgZ(14,"p-dialog",9),e.NdJ("visibleChange",function(s){return i.AddproductDialog=s}),e.YNc(15,B,35,3,"ng-template",10),e.YNc(16,K,2,0,"ng-template",11),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("value",i.stockList)("rows",10)("paginator",!0)("globalFilterFields",e.DdM(16,H))("tableStyle",e.DdM(17,G))("selection",i.selectedProducts)("rowHover",!0)("showCurrentPageReport",!0),e.xp6(6),e.Akn(e.DdM(18,M)),e.Q6J("visible",i.productDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(19,M)),e.Q6J("visible",i.AddproductDialog)("modal",!0))},dependencies:[b.EU,h.sg,h.O5,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.Q7,c.On,C.Qc,m.jx,D.Hq,v.o,_.Lt,y.Rn,x.FN,g.iA,g.lQ,g.fz,A.V,c.sg,c.u,U.Ct],encapsulation:2}),r})(),z=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[Z.Bz.forChild([{path:"",component:W}]),Z.Bz]}),r})();var R=l(6760),j=l(1480),$=l(9663),X=l(8062),V=l(4055),ee=l(6218),te=l(4037),oe=l(8052),ie=l(1825),ne=l(6022),le=l(2947),ae=l(7680),re=l(3514),ce=l(5609);let se=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[m.ez,m.YP],imports:[b.cc,h.ez,c.u5,z,C.WN,R._8,j.Gg,_.kW,$.zz,y.L$,X.XH,V.q4,ee.A,v.j,te.FI,oe.f,ie.C,v.j,_.kW,ne.Xt,D.hJ,ae.L,T.DL,x.EV,le.U,g.U$,A.S,c.UX,re.dp,ce.Iu,U.TX]}),r})()}}]);