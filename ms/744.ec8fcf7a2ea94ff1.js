"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[744],{744:(D,y,p)=>{p.r(y),p.d(y,{TimelineDemoModule:()=>K});var g=p(6814),x=p(3557),f=p(9862),c=p(5219),e=p(4769),o=p(8814),a=p(981),d=p(707),u=p(9552),T=p(7680),C=p(1312);function Z(t,n){1&t&&(e.TgZ(0,"tr",22)(1,"td",23)(2,"strong"),e._uU(3,"Product"),e.qZA()(),e.TgZ(4,"td",24)(5,"strong"),e._uU(6,"Serial No"),e.qZA()(),e.TgZ(7,"td",25)(8,"strong"),e._uU(9,"Company"),e.qZA()(),e.TgZ(10,"td",25)(11,"strong"),e._uU(12,"Model"),e.qZA()(),e.TgZ(13,"td",25)(14,"strong"),e._uU(15,"Warranty upto"),e.qZA()(),e.TgZ(16,"td",26)(17,"strong"),e._uU(18,"Price"),e.qZA()(),e.TgZ(19,"td",27)(20,"strong"),e._uU(21,"Edit Product"),e.qZA()()())}function P(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"tr")(1,"td",24),e._uU(2),e.qZA(),e.TgZ(3,"td",24),e._uU(4),e.qZA(),e.TgZ(5,"td",25),e._uU(6),e.qZA(),e.TgZ(7,"td",25),e._uU(8),e.qZA(),e.TgZ(9,"td",25),e._uU(10),e.qZA(),e.TgZ(11,"td",30),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td",31)(15,"button",32),e.NdJ("click",function(){e.CHM(i);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.editBill(r))}),e.qZA()()()}if(2&t){const i=e.oxw().$implicit;e.xp6(2),e.Oqu(i.product_name),e.xp6(2),e.Oqu(i.serial_number),e.xp6(2),e.Oqu(i.company_name),e.xp6(2),e.Oqu(i.model_name),e.xp6(2),e.Oqu(i.sels_warranty),e.xp6(2),e.Oqu(e.xi3(13,6,i.price,"INR"))}}function S(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"tr",33)(1,"td",24),e._uU(2),e.qZA(),e.TgZ(3,"td",24),e._uU(4),e.qZA(),e.TgZ(5,"td",25),e._uU(6),e.qZA(),e.TgZ(7,"td",25),e._uU(8),e.qZA(),e.TgZ(9,"td",25),e._uU(10),e.qZA(),e.TgZ(11,"td",30),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td",31)(15,"button",32),e.NdJ("click",function(){e.CHM(i);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.editBill(r))}),e.qZA()()()}if(2&t){const i=e.oxw().$implicit;e.xp6(2),e.Oqu(i.product_name),e.xp6(2),e.Oqu(i.serial_number),e.xp6(2),e.Oqu(i.company_name),e.xp6(2),e.Oqu(i.model_name),e.xp6(2),e.Oqu(i.sels_warranty),e.xp6(2),e.Oqu(e.xi3(13,6,i.price,"INR"))}}function k(t,n){if(1&t&&(e.YNc(0,P,16,9,"tr",28),e.YNc(1,S,16,9,"tr",29)),2&t){const i=n.$implicit;e.Q6J("ngIf",null==i.exchange_product_id),e.xp6(1),e.Q6J("ngIf",i.exchange_product_id>0)}}function A(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",34)(1,"label",35),e._uU(2,"scan BarCode"),e.qZA(),e.TgZ(3,"input",36),e.NdJ("ngModelChange",function(r){e.CHM(i);const s=e.oxw();return e.KtG(s.newProduct=r)})("keyup",function(r){e.CHM(i);const s=e.oxw();return e.KtG(s.searchProduct(r))}),e.qZA()()}if(2&t){const i=e.oxw();e.xp6(3),e.Q6J("ngModel",i.newProduct)}}function w(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.hideDialog())}),e.qZA(),e.TgZ(1,"button",38),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.saveProduct())}),e.qZA()}if(2&t){const i=e.oxw();e.xp6(1),e.Q6J("disabled",!i.stockList.length>0)}}function M(t,n){1&t&&(e.TgZ(0,"div",39),e._UZ(1,"p-progressSpinner"),e.qZA())}const E=function(){return{width:"550px"}};let I=(()=>{var t;class n{constructor(l,r,s,m,_){this.http=l,this.messageService=r,this.confirmationService=s,this.api=m,this.bill=_,this.ListData=[],this.spinner=!1,this.tot_price=0,this.Due=!1,this.productDialog=!1,this.submitted=!1,this.stockList=[],this.id=this.bill.billing_id}ngOnInit(){this.getBill(this.id)}hideDialog(){this.productDialog=!1,this.submitted=!1}getBill(l){this.spinner=!0;const r={billing_id:l},s=this.api.baseUrl,m=localStorage.getItem("token"),_=(new f.WM).set("Authorization",`Bearer ${m}`);this.http.post(s+"/billing/data",r,{headers:_}).subscribe(v=>{console.log(v),v&&(this.spinner=!1,this.data=v,this.CustomerDtls=this.data.customer,this.ListData=this.data.list,"P"==this.ListData[0].payment_flag?(this.Paid=!0,this.Due=!1):(this.Due=!0,this.Paid=!1),this.ListData.length>0&&this.ListData.forEach(W=>{this.tot_price+=Number(W.price)}))},v=>{this.spinner=!1,console.error(v)})}searchProduct(l){if(13===l.keyCode){this.spinner=!0;const r=this.api.baseUrl,s=localStorage.getItem("token"),m=(new f.WM).set("Authorization",`Bearer ${s}`);this.http.get(r+"/stock/stock_product?page=1&search="+l.target.value.toString(),{headers:m}).subscribe(_=>{this.spinner=!1,this.stockApi=_,this.stockListAll=this.stockApi.data,this.stockList=this.stockListAll.data,this.stockList.length>0||this.messageService.add({severity:"error",summary:"Error",detail:"Product dose not match with Stock item",life:3e3})})}}saveProduct(){this.submitted=!0;const l={cust_id:this.replaceProduct.cust_id,bill_id:this.replaceProduct.billing_id,product_barcode:this.replaceProduct.serial_number,new_barcode:this.stockList[0].serial_number};this.spinner=!0;const r=this.api.baseUrl,s=localStorage.getItem("token"),m=(new f.WM).set("Authorization",`Bearer ${s}`);this.http.post(r+"/billing/add_werent_product",l,{headers:m}).subscribe(_=>{console.log(_),this.spinner=!1,this.messageService.add({severity:"success",summary:"Successfully",detail:"Changed Product",life:3e3}),this.hideDialog()},_=>{this.spinner=!1,console.error(_),this.hideDialog(),this.messageService.add({severity:"error",summary:"Error",detail:"While Changing Product",life:3e3})})}editBill(l){this.replaceProduct=null,this.replaceProduct=l,this.productDialog=!0}callPrint(l){const r=document.getElementById(l).innerHTML,s=document.body.innerHTML;document.body.innerHTML=r,window.print(),document.body.innerHTML=s}}return(t=n).\u0275fac=function(l){return new(l||t)(e.Y36(f.eN),e.Y36(c.ez),e.Y36(c.YP),e.Y36(o.s),e.Y36(a.M))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],features:[e._Bn([c.ez])],decls:51,vars:12,consts:[[1,"grid"],[1,"col-12"],["id","bill",1,"card"],[1,"container"],[1,"row"],[1,"col-xs-12"],[1,"invoice-title",2,"margin-left","4%"],[1,"row",2,"margin-left","4%"],[1,"col-xs-6"],[1,"col-xs-6","text-right",2,"padding-right","2%"],[1,"field","col-12","md:col-12"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"card","flex","justify-content-center"],[3,"value"],["dt2",""],["pTemplate","header"],["pTemplate","body"],["header","Deposit amount into the customer account",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["class","spinner_overlay",4,"ngIf"],[2,"background-color","beige"],[1,"text-left",2,"padding-left","2%"],[1,"text-left"],[1,"text-center"],[1,"text-right",2,"padding-right","2%"],[2,"width","7rem"],[4,"ngIf"],["style","background-color: rgba(248, 189, 189, 0.818);",4,"ngIf"],[1,"text-right"],[2,"text-align","center"],["type","button","pButton","","pRipple","","icon","pi pi-pencil",3,"click"],[2,"background-color","rgba(248, 189, 189, 0.818)"],[1,"field"],["for","name"],["required","","autofocus","","type","text","required","",2,"width","100%","height","39px","border-color","lightgray","border-radius","5px",3,"ngModel","ngModelChange","keyup"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],[1,"spinner_overlay"]],template:function(l,r){1&l&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),e._uU(8),e.qZA()(),e._UZ(9,"hr"),e.TgZ(10,"div",7)(11,"div",8)(12,"address")(13,"strong"),e._uU(14,"Billed To:"),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"strong"),e._uU(17,"Customer Name:"),e.qZA(),e._uU(18),e._UZ(19,"br"),e.TgZ(20,"strong"),e._uU(21,"Mobile Number:"),e.qZA(),e._uU(22),e._UZ(23,"br"),e.TgZ(24,"strong"),e._uU(25,"Address:"),e.qZA(),e._uU(26),e._UZ(27,"br"),e.qZA()(),e.TgZ(28,"div",9)(29,"address")(30,"strong"),e._uU(31,"Billing Date:"),e.qZA(),e._UZ(32,"br"),e._uU(33),e._UZ(34,"br")(35,"br"),e.qZA()()()()(),e.TgZ(36,"div",4)(37,"div",10)(38,"div",11)(39,"div",12)(40,"h3",13)(41,"strong"),e._uU(42,"Purchase summary"),e.qZA()()(),e.TgZ(43,"p-table",14,15),e.YNc(45,Z,22,0,"ng-template",16),e.YNc(46,k,2,2,"ng-template",17),e.qZA()()()()()()()(),e.TgZ(47,"p-dialog",18),e.NdJ("visibleChange",function(m){return r.productDialog=m}),e.YNc(48,A,4,1,"ng-template",19),e.YNc(49,w,2,1,"ng-template",20),e.qZA(),e.YNc(50,M,2,0,"div",21)),2&l&&(e.xp6(8),e.hij("Billing-Id: ",r.ListData[0].billing_id,""),e.xp6(10),e.Oqu(r.CustomerDtls.name),e.xp6(4),e.Oqu(r.CustomerDtls.mobile_no),e.xp6(4),e.Oqu(r.CustomerDtls.adress),e.xp6(7),e.hij(" ",r.ListData[0].billingdate,""),e.xp6(10),e.Q6J("value",r.ListData),e.xp6(4),e.Akn(e.DdM(11,E)),e.Q6J("visible",r.productDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",r.spinner))},dependencies:[g.O5,c.jx,d.Hq,u.iA,T.G,C.V,g.H9],styles:["@media screen and (max-width: 960px){  .customized-timeline .p-timeline-event:nth-child(2n){flex-direction:row!important}  .customized-timeline .p-timeline-event:nth-child(2n) .p-timeline-event-content{text-align:left!important}  .customized-timeline .p-timeline-event-opposite{flex:0}  .customized-timeline .p-card{margin-top:1rem}}"]}),n})(),U=(()=>{var t;class n{}return(t=n).\u0275fac=function(l){return new(l||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[x.Bz.forChild([{path:"",component:I}]),x.Bz]}),n})();var h=p(1180);let $=(()=>{var t;class n{}return t=n,(0,h.Z)(n,"\u0275fac",function(l){return new(l||t)}),(0,h.Z)(n,"\u0275mod",e.oAB({type:t})),(0,h.Z)(n,"\u0275inj",e.cJS({imports:[g.ez,c.m8]})),n})(),j=(()=>{var t;class n{}return t=n,(0,h.Z)(n,"\u0275fac",function(l){return new(l||t)}),(0,h.Z)(n,"\u0275mod",e.oAB({type:t})),(0,h.Z)(n,"\u0275inj",e.cJS({imports:[g.ez,c.m8]})),n})();var R=p(9920),Y=p(3904);let K=(()=>{var t;class n{}return(t=n).\u0275fac=function(l){return new(l||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[c.YP],imports:[g.ez,$,d.hJ,j,U,u.U$,R.K,T.L,Y.D,C.S]}),n})()},9920:(D,y,p)=>{p.d(y,{I:()=>x,K:()=>f});var g=p(4769);let x=(()=>{class c{constructor(){this._printStyle=[],this.previewOnly=!1,this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(o){for(let a in o)o.hasOwnProperty(a)&&this._printStyle.push((a+JSON.stringify(o[a])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(o){let a=function(d){return`<link rel="stylesheet" type="text/css" href="${d}">`};if(-1!==o.indexOf(",")){const d=o.split(",");for(let u of d)this._styleSheetFile=this._styleSheetFile+a(u)}else this._styleSheetFile=a(o)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(o){const a=[],d=document.getElementsByTagName(o);for(let u=0;u<d.length;u++)a.push(d[u].outerHTML);return a.join("\r\n")}getFormData(o){for(var a=0;a<o.length;a++)o[a].defaultValue=o[a].value,o[a].checked&&(o[a].defaultChecked=!0)}getHtmlContents(){let o=document.getElementById(this.printSectionId),a=o.getElementsByTagName("input");this.getFormData(a);let d=o.getElementsByTagName("textarea");return this.getFormData(d),o.innerHTML}print(){let o,a,d="",u="";const T=this.getElementTag("base");this.useExistingCss&&(d=this.getElementTag("style"),u=this.getElementTag("link")),o=this.getHtmlContents(),a=window.open("","_blank","top=0,left=0,height=auto,width=auto"),a.document.open(),a.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${T}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${d}\n          ${u}\n        </head>\n        <body>\n          ${o}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              ${this.previewOnly?"":`setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});`}\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),a.document.close()}}return c.\u0275fac=function(o){return new(o||c)},c.\u0275dir=g.lG2({type:c,selectors:[["button","ngxPrint",""]],hostBindings:function(o,a){1&o&&g.NdJ("click",function(){return a.print()})},inputs:{previewOnly:"previewOnly",printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile"}}),c})(),f=(()=>{class c{}return c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=g.oAB({type:c}),c.\u0275inj=g.cJS({}),c})()}}]);